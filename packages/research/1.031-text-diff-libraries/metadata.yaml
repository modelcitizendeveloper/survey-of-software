id: "1.031"
title: "Text Diff Libraries (Myers, patience diff, semantic diff)"
category: "Text Processing"
tags:
  - diff
  - myers-diff
  - patience-diff
  - histogram-diff
  - semantic-diff
  - version-control
  - merge
  - lcs
  - edit-distance
  - ast-diff

description: |
  Text differencing algorithms and libraries for computing changes between text sequences.
  Covers line-based diff (Myers, patience, histogram), semantic/structural diff (AST-based),
  word/character-level diff, and three-way merge for conflict resolution.

problem_statement: |
  When comparing two text sequences (files, strings, documents), developers need to:
  1. Compute the minimum edit distance (insertions, deletions, modifications)
  2. Generate human-readable diffs for code review
  3. Handle moved/reordered blocks intelligently
  4. Resolve merge conflicts in version control
  5. Detect semantic changes (refactorings) vs syntax noise
  6. Balance performance with diff quality

key_libraries:
  line_based:
    - name: "difflib"
      purpose: "Standard library diff (SequenceMatcher, Myers-like)"
      status: "active"
    - name: "diff-match-patch"
      purpose: "Google's diff library (line, word, char level)"
      status: "active"
    - name: "libdiff"
      purpose: "Fast C-based diff with Python bindings"
      status: "unknown"

  semantic:
    - name: "tree-sitter"
      purpose: "Parse-tree diffing with language grammars"
      status: "active"
    - name: "gumtree"
      purpose: "AST diff for refactoring detection"
      status: "active"
    - name: "difftastic"
      purpose: "Structural diff using tree-sitter"
      status: "active"

  specialized:
    - name: "jsondiff"
      purpose: "JSON-aware diffing"
      status: "active"
    - name: "xmldiff"
      purpose: "XML tree diffing"
      status: "active"

discovery_phases:
  s1_rapid:
    status: "complete"
    date: "2026-01-30"
    findings: |
      Identified 9 libraries across 5 categories:
      1. Line-based: difflib, diff-match-patch, GitPython
      2. Semantic: tree-sitter
      3. Object diff: DeepDiff
      4. Format-specific: jsondiff, xmldiff
      5. Parsing/metrics: unidiff, python-Levenshtein

      Key insights:
      - No single "best" library (use case dependent)
      - Myers algorithm dominant, patience/histogram via git
      - Semantic diff emerging (tree-sitter) but immature
      - Specialists (jsondiff, xmldiff) beat generalists for formats

  s2_comprehensive:
    status: "not_started"
    focus: |
      - Benchmark Myers vs patience vs histogram on real codebases
      - Accuracy: minimal edit distance vs human readability
      - Edge cases: large files, binary data, unicode, moved blocks
      - Performance: time/space complexity on pathological inputs

  s3_need_driven:
    status: "not_started"
    focus: |
      - Version control: custom VCS, git-like tools
      - Code review: side-by-side diffs, syntax highlighting
      - Testing: assert expected == actual with readable diffs
      - Merge conflicts: 3-way merge strategies
      - Refactoring detection: renamed functions, extracted methods
      - Data diff: JSON schema changes, database migrations

  s4_strategic:
    status: "not_started"
    focus: |
      - Ecosystem: difflib (stdlib) vs third-party libs
      - Algorithm evolution: Myers → patience → semantic
      - Tree-sitter adoption for structural diff
      - Language-specific needs (Python AST, JavaScript, etc.)
      - Future: ML-based semantic diff, CRDT integration

related_topics:
  - "1.100: Text Processing"
  - "1.104.1: Python AST Parsing"
  - "1.056: JSON Libraries"

notes: |
  Diff algorithms are foundational to software engineering:
  - 1970s: Basic line-based diff (Hunt-McIlroy)
  - 1980s: Myers algorithm (optimal edit distance)
  - 2000s: Git's patience/histogram diff (better for code)
  - 2010s: Semantic diff (AST-based, refactoring-aware)
  - 2020s: Tree-sitter enables structural diff across languages

  Modern best practice:
  - Line-based diff (Myers/patience) for version control
  - Semantic diff for refactoring detection
  - Word/char-level diff for prose
  - Specialized diff for structured data (JSON, XML)

  The "best" diff depends on the use case - there's no universal winner.

created: "2026-01-30"
updated: "2026-01-30"
