# Alembic

**Category:** Database Migration Framework
**Package:** alembic
**GitHub:** https://github.com/sqlalchemy/alembic
**Date Evaluated:** December 4, 2025

## Overview

Alembic is SQLAlchemy's official database migration tool. While primarily a migration runner, its autogenerate feature provides powerful schema inspection and comparison capabilities by diffing ORM models against live databases.

## Popularity Metrics

- **GitHub Stars:** 2.7k+
- **PyPI Downloads:** 25M+ monthly
- **Maintenance:** Active (official SQLAlchemy project)
- **First Release:** 2011
- **Latest Version:** 1.13+ (as of Dec 2025)

## Primary Use Case

Database schema evolution through version-controlled migrations:
- Generate migration scripts automatically
- Compare ORM models vs database schemas
- Track schema changes over time
- Apply migrations across environments

## Key Capabilities

### What It Does Well

1. **Autogenerate Migrations**
   ```bash
   alembic revision --autogenerate -m "add user fields"
   ```
   - Compares SQLAlchemy models to database
   - Generates migration operations (add_column, create_table, etc.)
   - Detects tables, columns, indexes, constraints
   - Produces Python migration scripts

2. **Schema Comparison Engine**
   - Uses SQLAlchemy Inspector under the hood
   - Detects additions, removals, modifications
   - Handles column type changes
   - Tracks index and constraint changes

3. **Multi-Database Support**
   - All SQLAlchemy-supported databases
   - Dialect-specific operation handling
   - Cross-database migration patterns

4. **Version Control Integration**
   - Migration scripts as code
   - Linear or branching revision history
   - Team collaboration support
   - Rollback capabilities

5. **Extensibility**
   - Custom comparison functions
   - Render hooks for code generation
   - Environment-specific configurations
   - Plugin system for custom operations

### Advanced Features

- **Offline SQL generation:** Generate SQL without database connection
- **Batch operations:** Efficient SQLite schema changes
- **Multiple heads:** Branch management for parallel development
- **Partial autogenerate:** Selective table/schema scanning

## Limitations

1. **Autogenerate Not Perfect**
   - Misses column renames (sees as drop + add)
   - Can't detect all constraint changes
   - Requires review before applying
   - Limited server default detection

2. **Requires ORM Models**
   - Needs SQLAlchemy declarative models as source of truth
   - Can't compare database vs database directly
   - Not suitable for pure schema introspection

3. **Learning Curve**
   - Configuration setup required
   - Migration script syntax to learn
   - Understanding revision DAG
   - Environment management complexity

4. **Not a Schema Comparison Tool**
   - Purpose-built for migrations, not ad-hoc comparison
   - No standalone diff reporting
   - Requires migration framework scaffolding

## When to Use

**Best For:**
- Managing database schema changes over time
- Team environments with schema evolution
- Production deployment pipelines
- Generating migration scripts from model changes
- Tracking schema history

**Use Autogenerate Specifically For:**
- Initial migration creation (saves manual work)
- Detecting model changes automatically
- Generating starting point migrations (always review!)

**Not Suitable For:**
- One-off schema comparisons (use sqlalchemy-diff)
- Reverse engineering databases (use sqlacodegen)
- Schema documentation generation
- Database-to-database comparison

## Integration Notes

```python
# Common autogenerate workflow
from alembic import op
from alembic.autogenerate import compare_metadata
from sqlalchemy import MetaData, create_engine

# In alembic/env.py
target_metadata = Base.metadata  # Your ORM models

# Autogenerate compares this metadata against database
```

## Verdict

**The standard for SQLAlchemy migrations.** Autogenerate is invaluable for detecting model changes and generating migration scaffolds. However, it's a migration framework first, schema inspection tool second. Always review autogenerated migrations before applying. For pure schema inspection without migration context, consider dedicated tools.

**Recommendation:** Essential for any SQLAlchemy project with schema evolution needs. Use autogenerate to accelerate migration creation, but pair with manual review and testing.
