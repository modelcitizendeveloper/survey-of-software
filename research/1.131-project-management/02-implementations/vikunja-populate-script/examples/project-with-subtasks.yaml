# Example: Project with Parent-Child Task Hierarchy
#
# Demonstrates:
# - Parent-child task relationships (subtask_of)
# - Task decomposition
# - Progress tracking
# - Nested task structure

project:
  title: "API Development: User Service"
  description: "Build complete user service API with CRUD operations"
  color: "2ecc71"
  buckets:
    - name: "Todo"
      position: 0
    - name: "Doing"
      position: 1
      limit: 5
    - name: "Done"
      position: 2

labels:
  - title: "API"
    color: "3498db"
  - title: "Documentation"
    color: "95a5a6"
  - title: "Testing"
    color: "e74c3c"

tasks:
  # Parent Task 1: User CRUD Operations
  - title: "Implement User CRUD Endpoints"
    description: |
      Complete REST API for user management:
      - GET /users (list)
      - GET /users/:id (read)
      - POST /users (create)
      - PUT /users/:id (update)
      - DELETE /users/:id (delete)
    bucket: "Doing"
    priority: 5
    labels:
      - "API"

  # Subtasks of User CRUD
  - title: "Create GET /users endpoint"
    description: |
      List all users with pagination:
      - Query params: page, limit, sort
      - Response: users array + pagination metadata
      - Auth: Admin only
    bucket: "Done"
    priority: 4
    subtask_of: "Implement User CRUD Endpoints"
    labels:
      - "API"

  - title: "Create GET /users/:id endpoint"
    description: |
      Get single user by ID:
      - Path param: user ID
      - Response: user object
      - Auth: Owner or Admin
    bucket: "Done"
    priority: 4
    subtask_of: "Implement User CRUD Endpoints"
    labels:
      - "API"

  - title: "Create POST /users endpoint"
    description: |
      Create new user:
      - Request body: email, name, role
      - Validation: email format, unique email
      - Response: created user object
    bucket: "Doing"
    priority: 4
    subtask_of: "Implement User CRUD Endpoints"
    labels:
      - "API"

  - title: "Create PUT /users/:id endpoint"
    description: |
      Update existing user:
      - Path param: user ID
      - Request body: partial user object
      - Auth: Owner or Admin
    bucket: "Todo"
    priority: 3
    subtask_of: "Implement User CRUD Endpoints"
    labels:
      - "API"

  - title: "Create DELETE /users/:id endpoint"
    description: |
      Soft delete user:
      - Path param: user ID
      - Set deleted_at timestamp
      - Auth: Admin only
    bucket: "Todo"
    priority: 3
    subtask_of: "Implement User CRUD Endpoints"
    labels:
      - "API"

  # Parent Task 2: API Documentation
  - title: "Write API Documentation"
    description: |
      Complete OpenAPI/Swagger documentation:
      - Endpoint descriptions
      - Request/response schemas
      - Authentication requirements
      - Example requests
    bucket: "Todo"
    priority: 4
    labels:
      - "Documentation"

  # Subtasks of Documentation
  - title: "Document user schemas"
    description: |
      Define OpenAPI schemas:
      - User object
      - CreateUserRequest
      - UpdateUserRequest
      - UserListResponse
    bucket: "Todo"
    priority: 3
    subtask_of: "Write API Documentation"
    labels:
      - "Documentation"

  - title: "Document authentication"
    description: |
      Document auth flow:
      - JWT token format
      - Authorization header
      - Role-based access control
      - Error responses
    bucket: "Todo"
    priority: 3
    subtask_of: "Write API Documentation"
    labels:
      - "Documentation"

  - title: "Add usage examples"
    description: |
      Add code examples:
      - cURL examples
      - JavaScript/fetch examples
      - Python/requests examples
    bucket: "Todo"
    priority: 2
    subtask_of: "Write API Documentation"
    labels:
      - "Documentation"

  # Parent Task 3: Integration Tests
  - title: "Write Integration Test Suite"
    description: |
      Complete test coverage for all endpoints:
      - Happy path tests
      - Error case tests
      - Authorization tests
      - Validation tests
    bucket: "Todo"
    priority: 5
    labels:
      - "Testing"

  # Subtasks of Testing
  - title: "Test GET endpoints"
    description: |
      Test user retrieval:
      - List users with pagination
      - Get user by ID
      - Handle not found
      - Test authorization
    bucket: "Todo"
    priority: 4
    subtask_of: "Write Integration Test Suite"
    labels:
      - "Testing"

  - title: "Test POST endpoint"
    description: |
      Test user creation:
      - Valid user data
      - Invalid email format
      - Duplicate email
      - Missing required fields
    bucket: "Todo"
    priority: 4
    subtask_of: "Write Integration Test Suite"
    labels:
      - "Testing"

  - title: "Test PUT endpoint"
    description: |
      Test user updates:
      - Valid updates
      - Partial updates
      - Non-existent user
      - Authorization checks
    bucket: "Todo"
    priority: 4
    subtask_of: "Write Integration Test Suite"
    labels:
      - "Testing"

  - title: "Test DELETE endpoint"
    description: |
      Test user deletion:
      - Successful deletion
      - Non-existent user
      - Admin-only access
      - Soft delete verification
    bucket: "Todo"
    priority: 4
    subtask_of: "Write Integration Test Suite"
    labels:
      - "Testing"

# Usage:
# python populate_vikunja.py examples/project-with-subtasks.yaml
#
# This creates a project with:
# - 3 parent tasks (CRUD, Documentation, Testing)
# - 13 subtasks organized under parents
# - Clear task decomposition
# - Progress tracking at both levels
