experiment_number: "2.087"
title: "Matrix Protocol & Federation Patterns for SMCP"
date: "2026-01-08"
status: complete
researcher: claude-opus-4.5

context:
  smcp_reference: solutions/crew/ivan/development/projects/smcp/smcp-spec.md
  target_milestone: "Swimsuit Issue 6 - Federation"
  existing_integration: "Factumerit has a Matrix (Dendrite) deployment"

research_questions:
  - "How do Matrix servers discover and talk to each other?"
  - "Room model - shared state across servers applicable to SMCP channels?"
  - "Event graph DAG - conflict resolution useful for distributed MCP?"
  - "Identity model - how to map to cross-instance identities?"
  - "E2EE patterns - needed for secure artifact sharing?"

smcp_mappings:
  matrix_rooms: "Naomi event channels"
  user_server_identity: "Cross-instance identity (smcp://instance/component)"
  server_federation: "SMCP-to-SMCP protocol"
  e2ee: "Secure artifact sharing (deferred)"

sources:
  - url: "https://spec.matrix.org/latest/"
    title: "Matrix Specification Latest"
  - url: "https://spec.matrix.org/latest/server-server-api/"
    title: "Server-Server API"
  - url: "https://matrix.org/docs/older/stateres-v2/"
    title: "State Resolution v2"
  - url: "https://spec.matrix.org/v1.17/olm-megolm/"
    title: "Olm & Megolm Encryption"
  - url: "https://github.com/matrix-org/matrix-spec-proposals/pull/3995"
    title: "MSC3995: Linearized Matrix"
  - url: "https://matrix.org/docs/matrix-concepts/rooms_and_events/"
    title: "Rooms & Events Concepts"
  - url: "https://matrix.org/docs/older/e2ee-cross-signing/"
    title: "Cross-Signing Implementation"
  - url: "https://matrix-org.github.io/synapse/latest/delegate.html"
    title: "Synapse Delegation Documentation"

findings_summary:
  adopt:
    - "Server discovery via .well-known"
    - "Request signing (Ed25519)"
    - "Linearized event model (MSC3995)"
    - "Channel-based sharing (rooms)"
  skip:
    - "Full DAG replication"
    - "E2EE (Olm/Megolm)"
  simplify:
    - "Identity model (service accounts, not users)"
    - "Membership management (binary, not power levels)"

output_files:
  - 01_PATTERN_CATALOG.md
  - 02_SMCP_RECOMMENDATIONS.md
  - metadata.yaml

tags:
  - federation
  - matrix
  - smcp
  - naomi
  - distributed-systems
  - protocol-design
