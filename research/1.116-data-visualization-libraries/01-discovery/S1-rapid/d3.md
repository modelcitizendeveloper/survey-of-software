# D3.js

> "Data-Driven Documents: Bring data to life using SVG, Canvas, and HTML."

## Quick Facts

| Metric | Value |
|--------|-------|
| GitHub Stars | 108,000 |
| npm Weekly Downloads | ~4.5M |
| Rendering | SVG/Canvas/HTML |
| License | ISC |
| Creator | Mike Bostock (Observable) |

## What Is D3?

D3.js is the **foundation** of most visualization libraries. It's not a charting library - it's a toolkit for building any visualization you can imagine.

Libraries built on D3:
- Recharts, Nivo, Victory
- visx (Airbnb)
- Observable Plot
- nvd3, c3

## Why D3 Is Unique

D3 gives you **complete control**:
- Binds data to DOM elements
- Calculates scales, axes, layouts
- Handles transitions and animations
- Supports any output (SVG, Canvas, WebGL)

## Basic Concept: Selections & Data Binding

```javascript
import * as d3 from 'd3'

// Select elements
const svg = d3.select('#chart')

// Bind data to elements
const data = [10, 20, 30, 40, 50]

svg.selectAll('rect')
  .data(data)
  .join('rect')
  .attr('width', d => d * 10)
  .attr('height', 30)
  .attr('y', (d, i) => i * 35)
  .attr('fill', 'steelblue')
```

## D3's Power: Scales & Axes

```javascript
// Create scale
const xScale = d3.scaleLinear()
  .domain([0, 100])      // Data range
  .range([0, 500])       // Pixel range

// Create axis
const xAxis = d3.axisBottom(xScale)

// Apply axis
svg.append('g')
  .attr('transform', 'translate(0, 200)')
  .call(xAxis)
```

## Common D3 Modules

| Module | Purpose |
|--------|---------|
| d3-scale | Map data to visual values |
| d3-axis | Create axes |
| d3-shape | Lines, areas, pies, arcs |
| d3-hierarchy | Trees, treemaps, pack |
| d3-force | Force-directed layouts |
| d3-geo | Geographic projections |
| d3-transition | Animations |
| d3-selection | DOM manipulation |

## D3 + React: The Challenge

D3 and React both want to control the DOM:

```jsx
// WRONG: D3 manipulates DOM, React doesn't know
useEffect(() => {
  d3.select(ref.current)
    .selectAll('rect')
    .data(data)
    .join('rect')
    // React can't track these changes
}, [data])
```

### Solutions:

**1. D3 for math, React for DOM** (Recommended)
```jsx
// D3 calculates, React renders
const scale = d3.scaleLinear().domain([0, 100]).range([0, 500])

return (
  <svg>
    {data.map((d, i) => (
      <rect key={i} width={scale(d)} height={30} y={i * 35} />
    ))}
  </svg>
)
```

**2. Use visx** (Best of both worlds)
```jsx
import { scaleLinear } from '@visx/scale'
import { AxisBottom } from '@visx/axis'

// visx wraps D3 in React components
```

## When to Use D3 Directly

**Use D3 when:**
- Need custom visualization (no library covers it)
- Building your own chart library
- Need maximum performance control
- Creating interactive data art
- Force-directed graphs, network diagrams

**Don't use D3 when:**
- Need standard charts (bar, line, pie) → Recharts
- Want fast development → Any high-level library
- Team isn't D3-experienced → visx

## Learning Curve

D3 has a **steep learning curve**:

| Level | Time | What You Can Build |
|-------|------|-------------------|
| Beginner | 1-2 weeks | Basic bar chart |
| Intermediate | 1-2 months | Custom interactive charts |
| Advanced | 6+ months | Complex animations, custom layouts |

## Resources

- [Official Docs](https://d3js.org/)
- [GitHub](https://github.com/d3/d3)
- [Observable Examples](https://observablehq.com/@d3)
- [D3 Graph Gallery](https://d3-graph-gallery.com/)
